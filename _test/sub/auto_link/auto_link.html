<!doctype html>
<html lang="ko">
<head>
	<title>my</title>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<script src="/proto/js/jquery/jquery-1.8.3.min.js"></script>

	<style>
		* {font-family: dotum, sans-serif;}
		p {font-size: 12px;}
	</style>
</head>
<body>
<article>
	<h2>원문</h2>
	<p class="cont">
	</p>
</article>

<article>
	<h2>치환됨</h2>
	<p class="cont2">
	</p>
</article>

<script>
	$(document).ready(function() {
		$(".cont, .cont2").html($("#cont").html());
		autoLink(".cont2");
	});
	function autoLink(sel) {
		var regURL = new RegExp("(http|https|ftp|telnet|news|irc)://([-/.a-zA-Z0-9_~#%$?&=:200-377()]+)", "gi");
		var regEmail = new RegExp("([xA1-xFEa-z0-9_-]+@[xA1-xFEa-z0-9-]+\.[a-z0-9-]+)", "gi");




		//a 태그 자동적용
		var text = $(sel).html();
		var text2 = text.replace(regURL, "$1://$2 <a href='$1://$2' target='_blank'>(새창)</a>")
			.replace(regEmail, "$1 <a href='mailto:$1'>(새창)</a>");

		$(sel).html(text2);


		$(sel).find("a").css({color: "#1af", "text-decoraion": "underline"}); //a 태그 스타일
		$(sel).find("a").attr("target", "_blank"); //a target 속성추가



		$(sel).find("a").each(function() {
			var v = $(this).is(":empty");
			console.log(v);
		});
	}
</script>

<script type="html/template" id="cont">
	aaaaaa bbbbbb
	<br>
	<a href="사용자가 입력한 링크">링크이름</a> : 링크이름 직접쓴거는 적용 안함
	<br>
	<a href="사용자가 입력한 링크">http://google.com</a> : 등록자가 링크건거는 보전되고 링크를 파싱해서 새창으로 연결
	<br>
	<a href="사용자가 입력한 링크">http://google.com</a>
	<br>
	http://www.naver.com 등록자가 링크 안걸은 것은 파싱해서 새창으로 연결
	<br>
	aslkdfjal;sdkjflas;f
	<br>
	<a href="mailto:사용자가 입력한 링크">33333@aaaaa.com</a>
	<br>
	33333@aaaaa.com
	<br>
	jasld;f
	<br>
	http://www.naver.com
</script>
</body>
</html>