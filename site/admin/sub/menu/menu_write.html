<?php
	define("LAYOUT", "lnb");
	define("DOC_TITLE", "메뉴관리 " . $work_flag_name);
?>
<?php require_once $_SERVER['DOCUMENT_ROOT'] . "/Setting.php"; ?>
<?php require_once $_SERVER["DOCUMENT_ROOT"] . Setting::WEB_ROOT_ADMIN . "/inc/layout_top.php"; ?>
<?php
	//get ref data
	$ref_menu_data = MenuService::getRefMenu($req_params);
	
	//get edit data
	if ($req_params["work_flag"] == "edit") {
		$menu_data = MenuService::getMenu($req_params);
	}
?>
	
	<form name="f" method="post" action="menu_proc.php">
		<input type="hidden" name="work_flag" value="  <?= $req_params["work_flag"] ?>  ">
		<input type="hidden" name="menu_code" value="  <?= $req_params["menu_code"] ?>  ">
		<input type="hidden" name="menu_level" value="  <?= $req_params["menu_level"] ?>  ">
		<?php
			$col_width[1] = "25%";
			$col_width[2] = "75%";
		?>
		<ul class="grid">
			<li>
				<?php $v = Text::getText("MENU_NAME") ?>
				<div class="col" style="width:<?= $col_width[1] ?>;">
					<label for="<?= $v ?>"><?= $v ?></label>
				</div>
				<div class="col" style="width:<?= $col_width[2] ?>;">
					<input id="<?= $v ?>" type="text" name="menu_name" value="<?= $menu_data["menu_name"] ?>">
				</div>
			</li>
			<?php if ($req_params["menu_level"] > "1") { ?>
				<?php $v = Text::getText("REF_MENU_NAME"); ?>
				<li>
					<div class="col" style="width:<?= $col_width[1] ?>;">
						<label for="<?= $v ?>"><?= $v ?></label>
					</div>
					<div class="col" style="width:<?= $col_width[2] ?>;">
						<input id="<?= $v ?>" type="text" name="ref_menu_code" value="<?= $ref_menu_data["menu_name"] ?>" readonly>
					</div>
				</li>
			<? } ?>
			<li>
				<?php $v = Text::getText("MENU_URL") ?>
				<div class="col" style="width:<?= $col_width[1] ?>;">
					<label for="<?= $v ?>"><?= $v ?></label>
				</div>
				<div class="col" style="width:<?= $col_width[2] ?>;">
					<input id="<?= $v ?>" type="text" name="menu_url" value="<?= $menu_data["menu_url"] ?>">
				</div>
			</li>
		</ul>
		<div class="btn_w">
			<button class="btn" type="button" onclick="onSubmit();">
				<?= Text::getText($req_params["work_flag"]) ?>
			</button>
			<a class="btn" href="menu_list.html?<?= Request::getQueryString() ?>">
				<?= Text::getText("list"); ?>
			</a>
		</div>
	</form>
<?php require_once $_SERVER["DOCUMENT_ROOT"] . "/site/inc/comm_js.php"; ?>
	<script>
		function onSubmit() {
			Form.submit(f, "menu_proc.php");
		}
	</script>
<?php require_once $_SERVER["DOCUMENT_ROOT"] . Setting::WEB_ROOT_ADMIN . "/inc/layout_btm.php"; ?>